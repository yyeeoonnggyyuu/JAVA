DDL 
데이터 정의어(Data Definition Language, DDL)

문자형 데이터타입
 CHAR  
	-고정길이 문자형 데이터타입
	-지정한 길이보다 데이터 길이가 작으면 빈칸만큼 공백이 들어감
	- 예 ,고개번호, 주민등록번호

VARCHAR
	-가변길이 문자형 데이터타입
	-데이터의 길이만큼의 메모리만 차지함
	- 고객회사명, 주소
TEXT
	-VARCHAR 꽈 달리 길이를 지정하지 않음
	-컬럼의 최대 길이를 모르는 경우에 사용하기 적합함

숫자형 데이터타입
정수형 
	- 들어갈 데이터의 크기에 따라 TINYINT부터 BIGINT 중에서 선택하여 지정할 수 있음
실수형
	- FLOAT형, DOUBLE형, DECIMAL형 중에서 선택하여 지정할 수 있음


날짜시간형 데이터타입
DATE는 날짜, TIME은 시간을 저장하기위한 데이터타입
DATETIME과 TIMESTAMP는 날짜와 시간을 함께 저장할 수 있는 데이터타입
	-DATETIME과 TIMESTAMP의 차이는 시간대 (Time Zone)의 적용 여부임
	-TIMESTAMP 는 내부적으로 시간을가져

이진ㅋ형 데이터타입 BINARY 또는 BLOB 데이터타입
	-이미지 , 사운드,. PDF파일, 멀티미디어 및 기타 바이너리 데이터를 저장하는데 사용됨
BINARY(n)와 BYTE(n)는 CHAR 형태의 이진형 데이터타입 
등등

CREATE 
	- 데이터베이스나 테이블, 뷰, 인데스 들 객체를 만들 때 사용함
	-형식
		CREATE DATABASE [IF NOT ExISTS] 데이터베이스명;
	-MySQL에서 한글을 사용하려면 Character Set 설정
		CREATE DATABASE 데이터베이스명 [CHAR SET utf8mb4 COLLATE utf8mb4_general_ci];
예제8-1
CREATE DATABASE 한빛학사;


테이블생성 주의사항
왼쪽탭에서 한빛박사를 더블클릭하여 실행해줘야함

예제8-2
한빛학사 ㄷ이터 베이스에 학과 테이블을 생성하고 레코드 3건을 삽입

학과 테이블을 생성
CREATE TABLE 학과
(
 학과번호 CHAR(2), 학과명 VARCHAR(20), 학과장명 VARCHAR(20)
);

INSERT INTO 학과
 VALUES
     ('AA','컴퓨터공학과','배경민')
    ,('BB','소프트웨어학과','김남준')
    ,('CC','디자인융합학과','박선영');


/*예제8-3*/
CREATE TABLE 학생
    ( 
       학번 CHAR(5)
      ,이름 VARCHAR(20) 
      ,생일 DATE
      ,연락처 VARCHAR(20)
      ,학과번호 CHAR(2)
    );

INSERT INTO 학생 
VALUES
     ('S0001','이윤주','2020-01-30','01033334444','AA')
	,('S0001','이승은','2021-02-23',NULL,'AA')
    ,('S0003','백재용','2018-03-31','01077778888','DD');

여기서 s0001이 중복이고 dd라는 컬럼이 없는데 생성한 이유는 학습이라 하지만
지금 위에서  프라이머리키를 설정하지 않아서이며 추후에 학습하면서 알아가보자 


/*예제8-4*/
학생 테이블을 사용하여 휴학생 테이블을 생성하시오
이때 데이터는 복사하지 않고, 구조만 복사하시오 

CREATE TABLE 휴학생 AS
SELECT *
FROM 학생 (학생으로 부터 휴학생을 복사 where 1 = 2 는 1번이 2번대입)
WHERE 1 = 2; ( where를 빼면 데이터까지 복사함 )

휴학생이란 테이블을 생성하는데 복사하는 방법
AS
 뒤에 있는 select 부터 ; 까지를 

왜 select구조만 복사될까요 ??
select * from 학생; 을 하면 모든 데이터가 복사됨
여기서 데이터는 빼고 구조만 옮기고 싶으면 where 1=2;
를 넣으면 1 = 2 라는 거짓이므로 아무것도 출력이 안되므로 이것을 create table 휴학생 as 로 생성해줘가 됨
절대 참이 안되는 조건을 넣으면 구조만 복사됨


GENERATED 컬럼 
-테이블에 있는 컬럼을 기반으로 하여 계산된 값을 저장할 수 있는 커럼
-형식
	.컬럼 데이터타입 [GENERAITED ALWAYS] AS 계산식 [VIRTUAL | STORED]

-VIRTUAL 방식
	.기본값
	.데이터는 저장하지 않고 저읨나 데이터 사전에 추가하는

-STORED 방식
	.레코드가 삽입되거나 수정될 때마다 값이 계산되어 저장되기 때문에 추가 저장 공간이 필요하지만, 
	.select 검색 외에는 계산없이 바로 값을 읽어올 수 있음

예제 8-5 (STORED 방식)
휘트니스세넡의 회원을 관리하는 테이블을 만드시오, 
이때 체질량지수가 자동 꼐사된어 저장되도록 GENERATED 컬럼으로 설정하시오

CREATE TABLE 회원 
( 
아이디 VARCHAR(20) PRIMARY KEY
,회원명 VARCHAR(20)
,키 INT
,몸무게 INT
,체질량지수 DECIMAL(4,1) AS (몸무게/ POWER(키/100, 2)) STORED  (실시간으로 변환되는 장점이 있음)
);



ALTER

DROP

컬럼 추가 
ALTER TABLE 테이블명 ADD COLUMN new_컬럼명 데이터타입;
고정문자형 1자 ( 한글자를 하나의 데이터로 인식하기 때문에 CHAR은 1로 함

ALTER TABLE 학생 ADD 성별 CHAR(1);

위에서 한글을 쓰기 위해 utf를 변경 시켜줘서 한글이 1byte 씩 안되므로 3을 써야 받침까지 표현 가능
이래서 utf 를 쓰는건 데이터베이스에서 편한건 아님
한글은 CHAR(1)
받침이 3Byte를 쓰기때문에 VARCHAR(2) 로 바꾼것 밑에

----------------------------------------
컬럼 데이터타입 변경
형식 
ALTER TABLE 테이블명 MODIFY COLUMN new_컬럼명 데이터타입;

---------------------------------
학생테이블에 성별 컬럼을 추가
ALTER TABLE 학생 MODIFY COLUMN 성별 VARCHAR(2); 
가변문자형 2자 - VARCHAR(2)로 변경함
CHAR은 자음모은 하나씩 인식 VARCHAR는 글자 하나씩을 인식
---------------------------------------------

컬럼명 변경
형식
ALTER TABLE 학생 CHANGE COLUMN old_컬럼명 new_컬럼명 데이터타입;

학생테이블에서 연락처 컬럼명을 휴대폰번호로 변경하시오
ALTER TABLE 학생 CHANGE COLUMN 연락처 휴대폰번호 VARCHAR(20);
 --------------------------------------

컬럼삭제
형식
	ALTER TABLE 테이블명 DROP COLUMN 컬럼명;
학생테이블에서 성별 컬럼을 삭제
ALTER TABLE 학생 DROP COLUMN 성별;

------------------------------

테이블명 변경
ALTER TABLE 테이블명 RENAME new_테이블명;
휴학생 테이블명을 졸업생 테이블명으로 변경
ALTER TABLE 휴학생 RENAME 졸업생;

------------------------------------------
/*예제8-11*/
DROP
	데이터베이스, 테이블 및기타 여러 객체를 삭제할 때 사용함
형식
DROP DATABASE 데이터베이스명;
DROP TABLE 테이블명;

학과 테이블과 학생테이블을 삭제하시오
DROP TABLE 학과;
DROP TABLE 학생;
이건 실행 후 바로 왼쪽 탭에서도 바로 삭제되므로 delete나 drop 사용시 조심 할 것!
----------------------------------------------------

제약조건 
	데이터베이스에는 무결한 데이터가 들어가야함
	테이블에 아무런 제약 사항을 두지 않으면 적합하지 않은 데이터가 저장되어 무결성 위배가 발생할 수 있음
	이를 위해 테이블에 제약조건을 설정하여 데이터 무결성을 유지할 수 있음

제약조건의 특징
	제약조건은 데이터 사전에 저장됨
	...
	
제약조건의 설정
CREATE TABLE 테이블명
(
컬럼1 데이터타입 제약조건  		(1)
,컬럼2 데이터타입			(2)
,제약조건(컬럼2)			(3)
);
(1). 컬럼 레벵 제약조건 설정 : 컬럼의 데이터타입 바로 다음에 기술함
(2),(3) 테이블 레벨 제약조건 설정: 컬럼의정의를 끝낸 후 제약족너을 별도로 지정

PRIMARY KEY 제약
	기보니를 설정하는 제약조건
기본키는 레코드를 대표하는 키로 한개 이상의 컬럼으로 구성됨
	기본키는 테이블당 한개여야함
	기본키를 생성하면 자동으로 인데스가 생성됨
	기본키는 NOT NULL이어야하고, 유일한 값을 가져야함
		
UNIQUE 제약  - UNIQUE 제약조건이 설정된 컬럼에는 반드시 유일한 값을 넣어야함
CHECK 제약 - 설정된 컬럼에느
DEFAULT 제약 -
FOREIGN KEY 제약 별 4개 중요
외래키를 설정하는 제약조건
한 테이블의 외래키는 참조하는 테이블의 기본키이거나 NULL이어야함
외래키의 컬럼과 참조하는 테이블의 기본키 컬럼의 데이터 타입과 ...,

--------------------------------

/*예제8-12*/
제약조건을 추가하여 학과 테이블을 다시 생성하시오

/*방법1*/ 컬럼 레벵의 제약조건 설정
CREATE TABLE 학과
    (
       학과번호 CHAR(2) PRIMARY KEY
      ,학과명 VARCHAR(20) NOT NULL
      ,학과장명 VARCHAR(20)
    );

/*방법2*/ 테이블 레벨로 제약조건 설정
CREATE TABLE 학과
    (
       학과번호 CHAR(2)
      ,학과명 VARCHAR(20) NOT NULL
      ,학과장명 VARCHAR(20)
      ,PRIMARY KEY(학과번호)
    );

-------------------------------------
제약조건을 추가하여 학생 테이블을 다시 생성하시오 
방법 1 . 컬럼 레벨의 제약 조건 설정
CREATE TABLE 학생
    (
       학번 CHAR(5) PRIMARY KEY
      ,이름 VARCHAR(20) NOT NULL
      ,생일 DATE NOT NULL
      ,연락처 VARCHAR(20) UNIQUE 			(유일한 값만 존재 중복된 번호안됨 UNIQUE)
      ,학과번호 CHAR(2) REFERENCES 학과(학과번호)  	(외래키 학과번호에 있는 것만 가능)
      ,성별 CHAR(1) CHECK(성별 IN ('남','여'))  		(남또는 여만 가능)
      ,등록일 DATE DEFAULT(CURDATE())  		(등록된 날짜 참조)
      ,FOREIGN KEY (학과번호) REFERENCES 학과(학과번호)  (학과의 학과번호참조)
    );

/*방법2*/ 테이블 레벨로 제약조건설정
CREATE TABLE 학생
    (
       학번 CHAR(5)
      ,이름 VARCHAR(20) NOT NULL
      ,생일 DATE NOT NULL
      ,연락처 VARCHAR(20)
      ,학과번호 CHAR(2)
      ,성별 CHAR(1)
      ,등록일 DATE DEFAULT(CURDATE())
------------------------ 여기서부터 테이블 따로 제약조건
      ,PRIMARY KEY(학번)
      ,UNIQUE(연락처)
      ,CHECK(성별 IN ('남','여'))
      ,FOREIGN KEY (학과번호) REFERENCES 학과(학과번호)
    );

-*------------------------------------------------

제약조건을 추가하여 과목 테이블을 생성하시오
과목테이블 명세서

CREATE TABLE 과목
    (
	   과목번호 CHAR(5) PRIMARY KEY
      ,과목명 VARCHAR(20) NOT NULL
      ,학점 INT NOT NULL CHECK(학점 BETWEEN 2 AND 4)
      ,구분 VARCHAR(20) CHECK(구분 IN ('전공','교양','일반'))
    );

----------------------------------------------------------

제약조건을 추가하여 수강_1 테이블을 생성하시오 . 기본키는 수강년도, 수강학기, 학번, 과목번호를 모두 포함하시오
CREATE TABLE 수강_1
    (
       수강년도 CHAR(4) NOT NULL
      ,수강학기 VARCHAR(20) NOT NULL
                  CHECK(수강학기 IN ('1학기','2학기','여름학기','겨울학기'))
      ,학번 CHAR(5) NOT NULL
      ,과목번호 CHAR(5) NOT NULL
      ,성적 NUMERIC(3,1) CHECK(성적 BETWEEN 0 AND 4.5)
      ,PRIMARY KEY(수강년도, 수강학기, 학번, 과목번호)
      ,FOREIGN KEY (학번) REFERENCES 학생(학번)  학생에 학번을 참조하여 학번FOREIGN KEY를 사용?
      ,FOREIGN KEY (과목번호) REFERENCES 과목(과목번호) 과목에 과목번호을 참조하여 과목학번FOREIGN KEY를 사용?
    );
-----------------------------------
/*예제8-16*/
수강번호라는 대리키를 기본키로 하는 제약조건을 추가하여 수강_2 테이블을 생성하시오. 수강번호는 일련번호로 생성하시오.
이건 들어간 순서만으로 알수있어서 이해하기 힘듬
CREATE TABLE 수강_2
    (
       수강번호 INT PRIMARY KEY AUTO_INCREMENT  ( AUTO_INCREMENT  1부터 순서대로 들어감)
      ,수강년도 CHAR(4) NOT NULL
      ,수강학기 VARCHAR(20) NOT NULL
                  CHECK(수강학기 IN ('1학기','2학기','여름학기','겨울학기'))
      ,학번 CHAR(5) NOT NULL
      ,과목번호 CHAR(5) NOT NULL
      ,성적 NUMERIC(3,1) CHECK(성적 BETWEEN 0 AND 4.5)
      ,FOREIGN KEY (학번) REFERENCES 학생(학번)
      ,FOREIGN KEY (과목번호) REFERENCES 과목(과목번호)
    );

예제 8-15에서 primary key 를 빼고 수강번호 int primary키로 대리키를 생성

--------------------------------------------------

이젠 
조건제약이 걸려있어서
/*예제8-17*/
INSERT INTO 학과
VALUES ('AA','컴퓨터공학과','배경민');

INSERT INTO 학과
VALUES ('AA','소프트웨어학과','김남준');

INSERT INTO 학과
VALUES ('CC','디자인융합학과','박선영');

이렇게 할경우 두번째가 AA가 에러 가뜸 error code 1062

/*오류 수정*/
INSERT INTO 학과
VALUES ('BB','소프트웨어학과','김남준');

-------------------------------------------
/*예제8-18*/
INSERT INTO 학생(학번, 이름, 생일, 학과번호) 
VALUES ('S0001','이윤주','2020-01-30','AA');

INSERT INTO 학생(이름, 생일, 학과번호) 
VALUES ('이승은','2021-02-23','AA');   

INSERT INTO 학생(학번, 이름, 생일, 학과번호) 
VALUES ('S0003','백재용','2018-03-31','DD'); 

두번째 경우는 프라이머리키인 학번이 없어서 에러 뜸 (Error Code 1364)
세번째 경우는 학과번호가 DD 는 없고 CC까지만 있는데 DD를 넣어서 에러가 뜸 (Error Code 1452)
/*오류 수정*/
INSERT INTO 학생(학번, 이름, 생일, 학과번호)
VALUES (‘S0002’, '이승은','2020-01-30', 'AA');

INSERT INTO 학생(학번, 이름, 생일, 학과번호)
VALUES ('S0003','백재용','2018-03-31','CC');











